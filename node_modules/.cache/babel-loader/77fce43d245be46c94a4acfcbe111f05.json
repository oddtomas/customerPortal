{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useEffect, useRef } from 'react';\nimport { useContainerQuery } from '../../internal/hooks/container-queries';\nimport { useMergeRefs } from '../../internal/hooks/use-merge-refs';\n\nfunction getScrollableContainers(element) {\n  var node = element;\n\n  while ((node = node.parentElement) && node !== document.body) {\n    if (['scroll', 'auto'].indexOf(getComputedStyle(node).overflow) > -1) {\n      return node;\n    }\n  }\n\n  return null;\n}\n\nexport function useStickyPosition(topOffset) {\n  if (topOffset === void 0) {\n    topOffset = 0;\n  }\n\n  var _a = useContainerQuery(function (rect) {\n    return rect.height;\n  }),\n      stickyHeight = _a[0],\n      stickyMeasureRef = _a[1];\n\n  var stickyRefObject = useRef(null);\n  var stickyRef = useMergeRefs(stickyMeasureRef, stickyRefObject);\n\n  var _b = useContainerQuery(function (rect) {\n    return rect.width;\n  }),\n      stickyWidth = _b[0],\n      placeholderMeasureRef = _b[1];\n\n  var placeholderRefObject = useRef(null);\n  var placeholderRef = useMergeRefs(placeholderMeasureRef, placeholderRefObject);\n  var placeholder = React.createElement(\"div\", {\n    ref: placeholderRef\n  });\n  useEffect(function () {\n    if (!stickyRefObject.current || !placeholderRefObject.current) {\n      return;\n    }\n\n    var stickyElement = stickyRefObject.current;\n    var placeholder = placeholderRefObject.current;\n    var scrollParent = getScrollableContainers(stickyElement);\n\n    var handler = function handler() {\n      var stickyBox = stickyElement.getBoundingClientRect();\n      var containerBox = scrollParent ? scrollParent.getBoundingClientRect() : {\n        top: 0\n      };\n\n      if (stickyBox.top - containerBox.top <= topOffset) {\n        stickyElement.style.position = 'fixed';\n        stickyElement.style.width = \"\".concat(stickyWidth, \"px\");\n        stickyElement.style.top = \"\".concat(topOffset, \"px\");\n        placeholder.style.height = \"\".concat(stickyHeight, \"px\");\n      } else {\n        stickyElement.style.position = '';\n        stickyElement.style.width = \"\";\n        stickyElement.style.top = \"\";\n        placeholder.style.height = \"\";\n      }\n    };\n\n    var eventTarget = scrollParent || window;\n    eventTarget.addEventListener('scroll', handler);\n    handler();\n    return function () {\n      return eventTarget.removeEventListener('scroll', handler);\n    };\n  }, [topOffset, stickyWidth, stickyHeight, stickyRefObject, placeholderRefObject]);\n  return [stickyRef, placeholder];\n}","map":null,"metadata":{},"sourceType":"module"}